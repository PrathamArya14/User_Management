{% extends "base.html" %}
{% block content %}
<h2 class="mb-4">Manage Access</h2>

<!-- Add User Form -->
<h4>Add User</h4>
<form method="POST" class="row g-3 mb-4">
  <input type="hidden" name="action" value="add_user">
  <div class="col-md-3">
    <input type="text" name="user_name" class="form-control" placeholder="Name" required>
  </div>
  <div class="col-md-2">
    <input type="number" name="user_age" class="form-control" placeholder="Age" required>
  </div>
  <div class="col-auto">
    <button class="btn btn-success" type="submit">Add User</button>
  </div>
</form>

<!-- Add Permission Form -->
<h4>Add Permission</h4>
<form method="POST" class="row g-3 mb-4">
  <input type="hidden" name="action" value="add_permission">
  <div class="col-md-3">
    <input type="text" name="perm_name" class="form-control" placeholder="Permission Name" required>
  </div>
  <div class="col-md-4">
    <input type="text" name="perm_desc" class="form-control" placeholder="Description">
  </div>
  <div class="col-auto">
    <button class="btn btn-primary" type="submit">Add Permission</button>
  </div>
</form>

<!-- Assign Permission to User -->
<h4>Assign Permissions</h4>
<form method="POST" class="row g-3 mb-4">
  <input type="hidden" name="action" value="assign_permission">
  <div class="col-md-3">
    <select name="assign_user_id" class="form-select" required>
      <option selected disabled value="">Select User</option>
      {% for user in users %}
        <option value="{{ user['user_id'] }}">{{ user['name'] }}</option>
      {% endfor %}
    </select>
  </div>
  <div class="col-md-6">
    {% for p in permissions %}
      <div class="form-check form-check-inline">
        <input class="form-check-input" type="checkbox" name="assign_permissions" value="{{ p['permission_id'] }}">
        <label class="form-check-label">{{ p['name'] }}</label>
      </div>
    {% endfor %}
  </div>
  <div class="col-auto">
    <button class="btn btn-warning" type="submit">Assign</button>
  </div>
</form>
{% endblock %}
